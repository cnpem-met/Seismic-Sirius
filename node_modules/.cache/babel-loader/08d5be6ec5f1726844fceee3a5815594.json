{"ast":null,"code":"import _classCallCheck from\"/home/reftek/seismic-sirius/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/reftek/seismic-sirius/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/reftek/seismic-sirius/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/reftek/seismic-sirius/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import CanvasJSReact from'./canvasjs/canvasjs.react';import'./seismicpreview.css';import LoadGif from'../loadGif/loadgif';import $ from'jquery';var CanvasJSChart=CanvasJSReact.CanvasJSChart;var DayPlot=/*#__PURE__*/function(_Component){_inherits(DayPlot,_Component);var _super=_createSuper(DayPlot);function DayPlot(props){var _this;_classCallCheck(this,DayPlot);_this=_super.call(this,props);_this.state={channel:[],samplerate:0};return _this;}_createClass(DayPlot,[{key:\"componentDidMount\",value:function componentDidMount(){this.setPreview();if(this.props.type===\"preview\")setInterval(this.setPreview.bind(this),10000);}},{key:\"setPreview\",value:function setPreview(){var _this2=this;fetch(\"http://192.168.0.16/api/seismic\".concat(this.props.type,\".php?channel=\").concat(this.props.channel)).then(function(response){return response.json();}).then(function(responseJson){setTimeout(function(){_this2.setState({channel:responseJson.channel.concat(responseJson.channel,responseJson.channel,responseJson.channel)});},1500);});fetch(\"http://192.168.0.16/api/index.php?option=samplerate\").then(function(response){return response.json();}).then(function(responseJson){_this2.setState({samplerate:responseJson.monitor.status});});}},{key:\"hideAxys\",value:function hideAxys(option){if(option===\"preview\"){return function(){return\" \";};}}},{key:\"randomNumber\",value:function randomNumber(min,max){return Math.random()*(max-min)+min;}},{key:\"render\",value:function render(){var _this3=this;var data=[];var channelLength=parseInt(this.state.channel.length);var sample1hour=parseInt(this.state.samplerate)*Math.pow(60,2);var hours=Math.ceil(channelLength/sample1hour);var intervalo_x;if(channelLength<sample1hour)intervalo_x=sample1hour/hours/6;else intervalo_x=channelLength/hours/6;for(var i=0;i<hours;i++){var dataPoints=[];var dataSeries={type:\"line\",lineColor:\"rgb(\".concat(255/(hours-1)*i,\", 176, 117)\")};for(var j=0;j<this.state.channel.length/hours;j++){dataPoints.push({x:j,y:i*-200000+parseInt(this.state.channel[(i+1)*j])});}dataSeries.dataPoints=dataPoints;data.push(dataSeries);}var options={backgroundColor:\"transparent\",height:$(window).height(),zoomEnabled:true,axisY:{title:\"HOUR OF DAY\",titleFontSize:$(window).height()*0.016,titleFontColor:\"#FFFFFF\",includeZero:true,labelFontColor:\"white\",labelFontSize:$(window).height()*0.016,interval:200000,labelFormatter:function labelFormatter(e){if(e.value>0)return\"\";return e.value/-200000;}},axisX:{title:\"TIME IN MINUTES\",titleFontSize:$(window).height()*0.016,titleFontColor:\"#FFFFFF\",includeZero:false,labelFontColor:\"white\",labelFontSize:$(window).height()*0.016,interval:intervalo_x,labelFormatter:function labelFormatter(e){return parseInt(e.value*10/intervalo_x);}},data:data};if(this.state.channel.length===0)return/*#__PURE__*/React.createElement(LoadGif,{title:this.props.title});return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"spacing\"},\" \",this.props.title,\" \"),/*#__PURE__*/React.createElement(CanvasJSChart,{options:options,onRef:function onRef(ref){return _this3.chart=ref;}}));}}]);return DayPlot;}(Component);export{DayPlot as default};","map":{"version":3,"sources":["/home/reftek/seismic-sirius/src/modules/seismicpreview/dayplot.js"],"names":["React","Component","CanvasJSReact","LoadGif","$","CanvasJSChart","DayPlot","props","state","channel","samplerate","setPreview","type","setInterval","bind","fetch","then","response","json","responseJson","setTimeout","setState","concat","monitor","status","option","min","max","Math","random","data","channelLength","parseInt","length","sample1hour","hours","ceil","intervalo_x","i","dataPoints","dataSeries","lineColor","j","push","x","y","options","backgroundColor","height","window","zoomEnabled","axisY","title","titleFontSize","titleFontColor","includeZero","labelFontColor","labelFontSize","interval","labelFormatter","e","value","axisX","ref","chart"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport CanvasJSReact from './canvasjs/canvasjs.react';\n\nimport './seismicpreview.css';\nimport LoadGif from '../loadGif/loadgif';\nimport $ from 'jquery';\n\nvar CanvasJSChart = CanvasJSReact.CanvasJSChart;\n\nexport default class DayPlot extends Component{\n\n    constructor(props){\n        super(props);\n        this.state = {channel: [], samplerate: 0};\n    }\n\n    componentDidMount(){\n        this.setPreview();\n        if(this.props.type === \"preview\")\n            setInterval(this.setPreview.bind(this), 10000);\n    }\n\n    setPreview(){\n        fetch(`http://192.168.0.16/api/seismic${this.props.type}.php?channel=${this.props.channel}`)\n            .then((response) => response.json())\n            .then((responseJson) => {\n                setTimeout(() => {\n                    this.setState({\n                        channel: responseJson.channel.concat(responseJson.channel, responseJson.channel, responseJson.channel)\n                    })\n                }, 1500);\n            });\n        fetch(\"http://192.168.0.16/api/index.php?option=samplerate\")\n            .then((response) => response.json())\n            .then((responseJson) => {\n                this.setState({\n                    samplerate: responseJson.monitor.status\n                })\n            })\n    }\n\n    hideAxys(option){\n        if(option === \"preview\"){\n            return function(){return \" \";}\n        }\n    }\n\n    randomNumber(min, max){\n        return Math.random() * (max - min) + min;\n    }\n\n    render(){\n\n        var data = [];\n        var channelLength = parseInt(this.state.channel.length);\n        var sample1hour = (parseInt(this.state.samplerate) * (60 ** 2));\n        var hours = Math.ceil(channelLength / sample1hour);\n        var intervalo_x;\n        \n        if(channelLength < sample1hour)\n            intervalo_x = sample1hour / hours / 6;\n        else\n            intervalo_x = channelLength / hours / 6;\n\n        for(var i = 0; i < hours; i++){\n            var dataPoints = [];\n            var dataSeries = {type: \"line\", lineColor: `rgb(${(255 / (hours-1)) * i}, 176, 117)`};\n\n            for(var j = 0; j < this.state.channel.length / hours; j++)\n                dataPoints.push({x: j, y: i * -200000 + parseInt(this.state.channel[(i+1) * j])})\n\n            dataSeries.dataPoints = dataPoints;\n            data.push(dataSeries);\n        }\n\n        const options = {\n            backgroundColor: \"transparent\",\n            height: $(window).height(),\n            zoomEnabled: true,\n            axisY: {\n                title: \"HOUR OF DAY\",\n                titleFontSize: $(window).height() * 0.016,\n                titleFontColor: \"#FFFFFF\",\n                includeZero: true, \n                labelFontColor: \"white\", \n                labelFontSize:  $(window).height() * 0.016, \n                interval: 200000, \n                labelFormatter: function(e){\n                    if(e.value > 0)\n                        return \"\"\n                    return e.value / -200000;\n                }\n            },\n            axisX: {\n                title: \"TIME IN MINUTES\",\n                titleFontSize: $(window).height() * 0.016,\n                titleFontColor: \"#FFFFFF\",\n                includeZero: false,\n                labelFontColor: \"white\", \n                labelFontSize:  $(window).height() * 0.016,\n                interval: intervalo_x,\n                labelFormatter: function(e){\n                    return parseInt(e.value * 10 / intervalo_x);\n                }\n            },\n            data: data\n        }\n\n        if(this.state.channel.length === 0)\n            return(<LoadGif title={this.props.title}/>);\n\n        return(\n            <div>\n                <div className=\"spacing\"> {this.props.title} </div>\n                <CanvasJSChart options = { options } onRef={ref => this.chart = ref}/>\n            </div>\n        );\n\n    }\n\n}"]},"metadata":{},"sourceType":"module"}