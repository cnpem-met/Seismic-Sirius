{"ast":null,"code":"import _classCallCheck from\"/home/reftek/seismic-sirius/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/reftek/seismic-sirius/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/reftek/seismic-sirius/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/reftek/seismic-sirius/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import'./seismicpreview.css';import CanvasJSReact from'./canvasjs/canvasjs.react';import $ from'jquery';import LoadGif from'../loadGif/loadgif';var CanvasJSChart=CanvasJSReact.CanvasJSChart;var FouerierPreview=/*#__PURE__*/function(_Component){_inherits(FouerierPreview,_Component);var _super=_createSuper(FouerierPreview);function FouerierPreview(props){var _this;_classCallCheck(this,FouerierPreview);_this=_super.call(this,props);_this.state={channel:[],lastRequisition:\"first\"};_this.setPreview();return _this;}_createClass(FouerierPreview,[{key:\"setPreview\",value:function setPreview(){var _this2=this;fetch(\"http://10.0.38.242/api/fourierpreview.php?channel=\".concat(this.props.channel,\"&requisition=\").concat(this.props.requisition)).then(function(response){return response.json();}).then(function(responseJson){_this2.setState({channel:responseJson.fourier,lastRequisition:_this2.props.requisition});});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){if(this.state.lastRequisition!==this.props.requisition)this.setPreview();}},{key:\"render\",value:function render(){var _this3=this;var data=[];var dataPoints=[];var dataSeries={type:\"line\",lineColor:\"rgb(1, 176, 117)\"};var type=this.props.type;var frequencyUp=50/this.state.channel.length;var frequency=0;this.state.channel.forEach(function(e){dataPoints.push({x:frequency,y:parseFloat(e)});frequency=frequency+frequencyUp;});dataSeries.dataPoints=dataPoints;data.push(dataSeries);var options={backgroundColor:\"transparent\",height:$(window).height()*this.props.height,zoomEnabled:true,axisY:{title:\"MAGNITUDE (10e+6)\",titleFontSize:$(window).height()*0.016,titleFontColor:\"#FFFFFF\",includeZero:true,labelFontColor:\"white\",labelFontSize:$(window).height()*0.016,labelFormatter:function labelFormatter(e){if(type===\"preview\")return\"\";return e.value/Math.pow(10,6);}},axisX:{title:\"FREQUENCY (Hz)\",titleFontSize:$(window).height()*0.016,titleFontColor:\"#FFFFFF\",includeZero:false,labelFontColor:\"white\",labelFontSize:$(window).height()*0.016},data:data};if(this.state.channel.length===0)return/*#__PURE__*/React.createElement(LoadGif,{title:this.props.title,height:$(window).height()*this.props.height});return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"spacing\"},\" \",this.props.title,\" \"),/*#__PURE__*/React.createElement(CanvasJSChart,{options:options,onRef:function onRef(ref){return _this3.chart=ref;}}));}}]);return FouerierPreview;}(Component);export{FouerierPreview as default};","map":{"version":3,"sources":["/home/reftek/seismic-sirius/src/modules/seismicpreview/fourierpreview.js"],"names":["React","Component","CanvasJSReact","$","LoadGif","CanvasJSChart","FouerierPreview","props","state","channel","lastRequisition","setPreview","fetch","requisition","then","response","json","responseJson","setState","fourier","data","dataPoints","dataSeries","type","lineColor","frequencyUp","length","frequency","forEach","e","push","x","y","parseFloat","options","backgroundColor","height","window","zoomEnabled","axisY","title","titleFontSize","titleFontColor","includeZero","labelFontColor","labelFontSize","labelFormatter","value","axisX","ref","chart"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport './seismicpreview.css';\nimport CanvasJSReact from './canvasjs/canvasjs.react';\nimport $ from 'jquery';\nimport LoadGif from '../loadGif/loadgif';\n\nvar CanvasJSChart = CanvasJSReact.CanvasJSChart;\n\nexport default class FouerierPreview extends Component{\n\n    constructor(props){\n        super(props);\n        this.state = {channel: [], lastRequisition: \"first\"};\n        this.setPreview();\n    }\n\n    setPreview(){\n        fetch(`http://10.0.38.242/api/fourierpreview.php?channel=${this.props.channel}&requisition=${this.props.requisition}`)\n            .then((response) => response.json())\n            .then((responseJson) => {\n                this.setState({\n                    channel: responseJson.fourier,\n                    lastRequisition: this.props.requisition\n                });\n            });\n    }\n\n    componentDidUpdate(){\n        if(this.state.lastRequisition !== this.props.requisition)\n            this.setPreview()\n    }\n\n    render(){\n\n        var data = [];\n        var dataPoints = [];\n        var dataSeries = {type: \"line\", lineColor: \"rgb(1, 176, 117)\"};\n        var type = this.props.type;\n\n        var frequencyUp = 50/this.state.channel.length;\n        var frequency = 0\n\n        this.state.channel.forEach(e => {\n            dataPoints.push({x: frequency, y: parseFloat(e)});\n            frequency = frequency + frequencyUp;\n        })\n        \n        dataSeries.dataPoints = dataPoints;\n        data.push(dataSeries);\n\n        const options = {\n            backgroundColor: \"transparent\",\n            height: $(window).height() * this.props.height,\n            zoomEnabled: true,\n            axisY: {\n                title: \"MAGNITUDE (10e+6)\",\n                titleFontSize: $(window).height() * 0.016,\n                titleFontColor: \"#FFFFFF\",\n                includeZero: true, \n                labelFontColor: \"white\", \n                labelFontSize:  $(window).height() * 0.016, \n                labelFormatter: function(e){\n                    if(type === \"preview\")\n                        return \"\";\n                    return e.value / 10**6;\n                },\n            },\n\t\t\taxisX: {\n                title: \"FREQUENCY (Hz)\",\n                titleFontSize: $(window).height() * 0.016,\n                titleFontColor: \"#FFFFFF\",\n                includeZero: false, \n                labelFontColor: \"white\", \n                labelFontSize:  $(window).height() * 0.016,\n            },\n            data: data\n        }\n        \n        if(this.state.channel.length === 0)\n            return(<LoadGif title={this.props.title} height={$(window).height() * this.props.height}/>);\n        \n        return(\n            <div>\n                <div className=\"spacing\"> {this.props.title} </div>\n                <CanvasJSChart options = {options} onRef={ref => this.chart = ref}/>\n            </div>\n        );\n\n    }\n\n}"]},"metadata":{},"sourceType":"module"}