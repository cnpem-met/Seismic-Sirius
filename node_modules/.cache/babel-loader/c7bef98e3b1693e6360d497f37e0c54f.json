{"ast":null,"code":"import _classCallCheck from\"/home/reftek/seismic-sirius/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/reftek/seismic-sirius/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/reftek/seismic-sirius/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/reftek/seismic-sirius/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import'./seismicpreview.css';import CanvasJSReact from'./canvasjs/canvasjs.react';import $ from'jquery';import{hideAxys}from'./actions/actions';import LoadGif from'../loadGif/loadgif';var CanvasJSChart=CanvasJSReact.CanvasJSChart;var SeismicPreview=/*#__PURE__*/function(_Component){_inherits(SeismicPreview,_Component);var _super=_createSuper(SeismicPreview);function SeismicPreview(props){var _this;_classCallCheck(this,SeismicPreview);_this=_super.call(this,props);_this.state={channel:[],startTime:0,lastRequisition:\"first\"};_this.setPreview();return _this;}_createClass(SeismicPreview,[{key:\"setPreview\",value:function setPreview(){var _this2=this;fetch(\"http://10.0.38.242/api/seismic\".concat(this.props.type,\".php?channel=\").concat(this.props.channel,\"&requisition=\").concat(this.props.requisition)).then(function(response){return response.json();}).then(function(responseJson){_this2.setState({channel:responseJson.channel,startTime:responseJson.startTime,lastRequisition:_this2.props.requisition});});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){if(this.state.lastRequisition!==this.props.requisition)this.setPreview();}},{key:\"render\",value:function render(){var _this3=this;var data=[];var dataPoints=[];var dataSeries={type:\"line\",lineColor:\"rgb(1, 176, 117)\"};var time=parseFloat(this.state.startTime);this.state.channel.forEach(function(e){dataPoints.push({x:time,y:parseInt(e)});time=time+0.01;});dataSeries.dataPoints=dataPoints;data.push(dataSeries);var options={backgroundColor:\"transparent\",height:$(window).height()*this.props.height,zoomEnabled:true,axisY:{title:\"MAGNITUDE (10e+6)\",titleFontSize:$(window).height()*0.016,titleFontColor:\"#FFFFFF\",includeZero:true,labelFontColor:\"white\",labelFontSize:$(window).height()*0.016,labelFormatter:hideAxys(this.props.type)},axisX:{titleFontSize:$(window).height()*0.016,titleFontColor:\"#FFFFFF\",includeZero:false,labelFontColor:\"white\",labelFontSize:$(window).height()*0.016,labelFormatter:function labelFormatter(e){var a=new Date(e.value*1000);var hour=a.getHours()+3;var min=a.getMinutes();var sec=a.getSeconds();if(hour<10)hour=\"0\"+hour;if(min<10)min=\"0\"+min;if(sec<10)sec=\"0\"+sec;var time=hour+':'+min+':'+sec;return time;}},data:data};if(this.state.channel.length===0)return/*#__PURE__*/React.createElement(LoadGif,{title:this.props.title,height:$(window).height()*this.props.height});return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"spacing\"},\" \",this.props.title,\" \"),/*#__PURE__*/React.createElement(CanvasJSChart,{options:options,onRef:function onRef(ref){return _this3.chart=ref;}}));}}]);return SeismicPreview;}(Component);export{SeismicPreview as default};","map":{"version":3,"sources":["/home/reftek/seismic-sirius/src/modules/seismicpreview/seismicpreview.js"],"names":["React","Component","CanvasJSReact","$","hideAxys","LoadGif","CanvasJSChart","SeismicPreview","props","state","channel","startTime","lastRequisition","setPreview","fetch","type","requisition","then","response","json","responseJson","setState","data","dataPoints","dataSeries","lineColor","time","parseFloat","forEach","e","push","x","y","parseInt","options","backgroundColor","height","window","zoomEnabled","axisY","title","titleFontSize","titleFontColor","includeZero","labelFontColor","labelFontSize","labelFormatter","axisX","a","Date","value","hour","getHours","min","getMinutes","sec","getSeconds","length","ref","chart"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport './seismicpreview.css';\nimport CanvasJSReact from './canvasjs/canvasjs.react';\nimport $ from 'jquery';\n\nimport {hideAxys} from './actions/actions';\nimport LoadGif from '../loadGif/loadgif';\n\nvar CanvasJSChart = CanvasJSReact.CanvasJSChart;\n\nexport default class SeismicPreview extends Component{\n\n    constructor(props){\n        super(props);\n        this.state = {channel: [], startTime: 0, lastRequisition: \"first\"};\n        this.setPreview();\n    }\n\n    setPreview(){\n        fetch(`http://10.0.38.242/api/seismic${this.props.type}.php?channel=${this.props.channel}&requisition=${this.props.requisition}`)\n            .then((response) => response.json())\n            .then((responseJson) => {\n                 this.setState({\n                     channel: responseJson.channel,\n                     startTime: responseJson.startTime,\n                     lastRequisition: this.props.requisition\n                 });\n            })\n    }\n\n    componentDidUpdate(){\n        if(this.state.lastRequisition !== this.props.requisition)\n            this.setPreview()\n    }\n\n    render(){\n\n        var data = [];\n        var dataPoints = [];\n        var dataSeries = {type: \"line\", lineColor: \"rgb(1, 176, 117)\"};\n        var time = parseFloat(this.state.startTime);\n\n        this.state.channel.forEach(e => {\n            dataPoints.push({x: time, y: parseInt(e)})\n            time = time + 0.01\n        });\n\n        dataSeries.dataPoints = dataPoints;\n        data.push(dataSeries);\n\n        const options = {\n            backgroundColor: \"transparent\",\n            height: $(window).height() * this.props.height,\n            zoomEnabled: true,\n            axisY: {\n                title: \"MAGNITUDE (10e+6)\",\n                titleFontSize: $(window).height() * 0.016,\n                titleFontColor: \"#FFFFFF\",\n                includeZero: true, \n                labelFontColor: \"white\", \n                labelFontSize:  $(window).height() * 0.016, \n                labelFormatter: hideAxys(this.props.type)\n            },\n\t\t\taxisX: {\n                titleFontSize: $(window).height() * 0.016,\n                titleFontColor: \"#FFFFFF\",\n                includeZero: false, \n                labelFontColor: \"white\", \n                labelFontSize:  $(window).height() * 0.016,\n                labelFormatter: function (e){\n                    var a = new Date(e.value*1000);\n                    var hour = a.getHours() + 3;\n                    var min = a.getMinutes();\n                    var sec = a.getSeconds();\n                    if(hour < 10)\n                        hour = \"0\"+hour\n                    if(min < 10)\n                        min = \"0\"+min\n                    if(sec < 10)\n                        sec = \"0\"+sec\n                    var time = hour + ':' + min + ':' + sec ;\n                    return time;\n                }  \n            },\n            data: data\n        }\n\n        if(this.state.channel.length === 0)\n            return(<LoadGif title={this.props.title} height={$(window).height() * this.props.height}/>);\n        \n        return(\n            <div>\n                <div className=\"spacing\"> {this.props.title} </div>\n                <CanvasJSChart options = {options} onRef={ref => this.chart = ref}/>\n            </div>\n        );\n\n    }\n\n}\n"]},"metadata":{},"sourceType":"module"}